"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-slides/route";
exports.ids = ["app/api/generate-slides/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-slides%2Froute&page=%2Fapi%2Fgenerate-slides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-slides%2Froute.ts&appDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-slides%2Froute&page=%2Fapi%2Fgenerate-slides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-slides%2Froute.ts&appDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_leodrougge_Documents_Slide_Generator_v0_2_app_api_generate_slides_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate-slides/route.ts */ \"(rsc)/./app/api/generate-slides/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-slides/route\",\n        pathname: \"/api/generate-slides\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-slides/route\"\n    },\n    resolvedPagePath: \"/Users/leodrougge/Documents/Slide Generator v0.2/app/api/generate-slides/route.ts\",\n    nextConfigOutput,\n    userland: _Users_leodrougge_Documents_Slide_Generator_v0_2_app_api_generate_slides_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-slides/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1zbGlkZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlLXNsaWRlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdlbmVyYXRlLXNsaWRlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmxlb2Ryb3VnZ2UlMkZEb2N1bWVudHMlMkZTbGlkZSUyMEdlbmVyYXRvciUyMHYwLjIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbGVvZHJvdWdnZSUyRkRvY3VtZW50cyUyRlNsaWRlJTIwR2VuZXJhdG9yJTIwdjAuMiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUM7QUFDOUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbGlkZS1nZW5lcmF0b3IvP2E5MDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2xlb2Ryb3VnZ2UvRG9jdW1lbnRzL1NsaWRlIEdlbmVyYXRvciB2MC4yL2FwcC9hcGkvZ2VuZXJhdGUtc2xpZGVzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS1zbGlkZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nZW5lcmF0ZS1zbGlkZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dlbmVyYXRlLXNsaWRlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9sZW9kcm91Z2dlL0RvY3VtZW50cy9TbGlkZSBHZW5lcmF0b3IgdjAuMi9hcHAvYXBpL2dlbmVyYXRlLXNsaWRlcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZ2VuZXJhdGUtc2xpZGVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-slides%2Froute&page=%2Fapi%2Fgenerate-slides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-slides%2Froute.ts&appDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate-slides/route.ts":
/*!******************************************!*\
  !*** ./app/api/generate-slides/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n\n\nconst anthropic = new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.ANTHROPIC_API_KEY || \"\"\n});\nasync function POST(request) {\n    try {\n        const { notes, brief, slideAmountMode, slideAmountMin, slideAmountMax } = await request.json();\n        if (!notes || typeof notes !== \"string\" || !notes.trim()) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Notes are required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!process.env.ANTHROPIC_API_KEY) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ANTHROPIC_API_KEY is not configured\"\n            }, {\n                status: 500\n            });\n        }\n        // Build prompt with slide count instruction\n        let slideCountInstruction = \"\";\n        let summaryInstruction = \"\";\n        if (slideAmountMode === \"edit\" && typeof slideAmountMin === \"number\" && typeof slideAmountMax === \"number\" && slideAmountMin >= 3 && slideAmountMax <= 32 && slideAmountMin <= slideAmountMax) {\n            if (slideAmountMin === slideAmountMax) {\n                slideCountInstruction = `\\nVIKTIGT: Generera EXAKT ${slideAmountMin} slides. Inte fler, inte färre.`;\n                summaryInstruction = `\\nVIKTIGT: Om innehållet är omfattande (t.ex. många bullet points eller lång text), sammanfatta HÅRT för att passa in i exakt ${slideAmountMin} slides. Kombinera relaterade punkter, sammanfatta detaljer till huvudbudskap, och prioritera det viktigaste innehållet. Det är viktigare att få exakt ${slideAmountMin} slides än att behålla all detaljnivå.`;\n            } else {\n                slideCountInstruction = `\\nVIKTIGT: Generera mellan ${slideAmountMin} och ${slideAmountMax} slides. Antalet ska ligga inom detta spann.`;\n                summaryInstruction = `\\nVIKTIGT: Om innehållet är omfattande (t.ex. många bullet points eller lång text), sammanfatta vid behov för att passa in i mellan ${slideAmountMin} och ${slideAmountMax} slides. Kombinera relaterade punkter, sammanfatta detaljer till huvudbudskap, och prioritera det viktigaste innehållet. Det är viktigare att få antalet slides inom spannet (${slideAmountMin}-${slideAmountMax}) än att behålla all detaljnivå.`;\n            }\n        } else {\n            slideCountInstruction = \"\\nVIKTIGT: Dela upp logiskt i separata slides baserat p\\xe5 \\xe4mnen/avsnitt. G\\xf6r minimala anpassningar och anv\\xe4nd inneh\\xe5llet som det \\xe4r.\";\n            summaryInstruction = \"\\nVIKTIGT: Sammanfatta MINIMALT - anv\\xe4nd prim\\xe4rt inneh\\xe5llet som det \\xe4r.\";\n        }\n        const prompt = `Du ska dela upp dessa anteckningar i slides för en presentation. Varje slide ska ha:\n- overline: Denna kommer automatiskt att sättas till samma som title-sidan (första sliden). Du behöver inte bekymra dig om denna - sätt den alltid till tom sträng (\"\").\n- title: Huvudrubriken för sliden (max 60 tecken) - Detta är huvudbudskapet och den viktiga informationen. Undvik ord över 15 tecken eftersom rubriktypsnittet är stort.\n- bodyText: Huvudinnehållet (2-4 rader, separera med \\\\n för radbrytningar)\n${slideCountInstruction}\n${summaryInstruction}\n\nVIKTIGA REGLER FÖR TEXTFÖRFINING:\n- Du får INTE lägga till någon ny information\n- Du får bara förbättra texten språkligt så att den passar en slidepresentation: kort, tydligt och rakt på sak\n- Behåll betydelsen exakt som i originalet\n- Inga exempel, inga förklaringar, inga nya ord som ändrar innehållet\n- Förfina bara rytm, klarhet och läsbarhet\n\nSTRUKTUR OCH LÄSBARHET:\n- Varje slide ska kunna läsas och förstås självständigt\n- Rubrikerna ska hänga ihop som en logisk kedja – men varje rubrik ska också vara fullt begriplig på egen hand\n\nVIKTIGT: \n- Första sliden ska vara en titelsida med temat för presentationen\n  - overline: Sätt till tom sträng (\"\")\n  - title: Huvudtemat/titeln för presentationen\n  - bodyText: Lämna tom eller en kort beskrivning av vad presentationen handlar om\n  - layout: \"title\"\n- Om presentationen är längre än 5 slides, ska slide 2 använda \"intro\" layout och innehålla en sammanfattning av hela presentationen i ett stycke i bodyText. Denna slide fungerar som en översikt över innehållet.\n  - layout: \"intro\" för slide 2 när presentationen är längre än 5 slides\n  - title: Lämna tom (intro-layout använder inte title)\n  - bodyText: En sammanfattande text i ett stycke som ger en översikt över presentationens huvudpunkter\n- Slide 3 ska vara en innehållsförteckning (TOC) med avdelningsrubriker när presentationen är längre än 5 slides.\n  - layout: \"quadrant-1-2-large\" för TOC-sliden\n  - title: \"Innehållsförteckning\"\n  - bodyText: Lista av avdelningsrubriker (en per rad, kommer att formateras som bullets)\n- För att strukturera presentationen: använd \"avdelare\" layout för avdelningsrubriker (t.ex. \"Del 1\", \"Strategi\", \"Resultat\"). Dessa slides ska ha ljusgrå bakgrund och fungerar som avdelningar i presentationen.\n  - layout: \"avdelare\" för avdelningsrubriker\n  - title: Avdelningsrubriken\n  - bodyText: Lämna tom eller kort beskrivning\n- Övriga slides: Använd faktiskt innehåll från anteckningarna, hitta inte på saker\n- Sätt alltid overline till tom sträng (\"\"). Den kommer automatiskt att uppdateras i systemet.\n\nAnteckningar:\n${notes}\n\nReturnera JSON-array med SlideState objekt i formatet:\n[\n  {\n    \"overline\": \"\",\n    \"title\": \"...\",\n    \"bodyText\": \"...\",\n    \"layout\": \"title\"\n  },\n  {\n    \"overline\": \"\",\n    \"title\": \"\",\n    \"bodyText\": \"Sammanfattning av presentationen i ett stycke...\",\n    \"layout\": \"intro\"\n  },\n  {\n    \"overline\": \"\",\n    \"title\": \"...\",\n    \"bodyText\": \"...\",\n    \"layout\": \"avdelare\"\n  },\n  {\n    \"overline\": \"\",\n    \"title\": \"...\",\n    \"bodyText\": \"...\",\n    \"layout\": \"title\"\n  },\n  ...\n]\n\nAnvänd \"title\" som layout för vanliga slides, \"avdelare\" för avdelningsrubriker, och \"intro\" för slide 2 om presentationen är längre än 5 slides. Sätt overline till tom sträng (\"\"). Returnera ENDAST JSON, ingen ytterligare text.`;\n        // Add brief to prompt if provided\n        let fullPrompt = prompt;\n        if (brief && typeof brief === \"string\" && brief.trim()) {\n            fullPrompt = `BRIEF/KONTEXT:\n${brief.trim()}\n\n${prompt}`;\n        }\n        // Try Claude 4.5 Sonnet first, then fallback to 3.5\n        let message;\n        const modelsToTry = [\n            \"claude-sonnet-4-5\",\n            \"claude-sonnet-4-5-20241022\",\n            \"claude-4-5-sonnet\",\n            \"claude-3-5-sonnet-20241022\",\n            \"claude-3-5-sonnet-20240620\",\n            \"claude-3-5-sonnet\"\n        ];\n        let lastError = null;\n        for (const model of modelsToTry){\n            try {\n                message = await anthropic.messages.create({\n                    model: model,\n                    max_tokens: 4096,\n                    messages: [\n                        {\n                            role: \"user\",\n                            content: fullPrompt\n                        }\n                    ]\n                });\n                console.log(`Successfully used model: ${model}`);\n                break; // Success, exit loop\n            } catch (error) {\n                lastError = error;\n                console.warn(`Failed with ${model}, trying next...`, error.message);\n                continue;\n            }\n        }\n        if (!message) {\n            throw new Error(`All models failed. Last error: ${lastError?.message || \"Unknown error\"}`);\n        }\n        const content = message.content[0];\n        if (content.type !== \"text\") {\n            throw new Error(\"Unexpected response type from Claude\");\n        }\n        // Extract JSON from response (might have markdown code blocks)\n        let jsonText = content.text.trim();\n        // Remove markdown code blocks if present\n        if (jsonText.startsWith(\"```\")) {\n            jsonText = jsonText.replace(/^```json\\s*/i, \"\").replace(/^```\\s*/, \"\").replace(/```\\s*$/g, \"\").trim();\n        }\n        // Try to extract JSON array if there's extra text\n        const jsonMatch = jsonText.match(/\\[[\\s\\S]*\\]/);\n        if (jsonMatch) {\n            jsonText = jsonMatch[0];\n        }\n        let slides;\n        try {\n            slides = JSON.parse(jsonText);\n        } catch (parseError) {\n            console.error(\"JSON parse error:\", parseError);\n            console.error(\"Text to parse:\", jsonText.substring(0, 500));\n            throw new Error(`Failed to parse Claude response as JSON: ${parseError.message}`);\n        }\n        if (!Array.isArray(slides) || slides.length === 0) {\n            throw new Error(\"Claude did not return a valid array of slides\");\n        }\n        // Validate and set default layout if missing\n        const validatedSlides = slides.map((slide, index)=>{\n            if (!slide || typeof slide !== \"object\") {\n                throw new Error(`Invalid slide at index ${index}`);\n            }\n            return {\n                overline: slide.overline || \"\",\n                title: slide.title || \"\",\n                bodyText: slide.bodyText || \"\",\n                layout: slide.layout || \"title\",\n                useBullets: slide.useBullets ?? false\n            };\n        });\n        // Set overline on all slides to match title slide's title\n        const titleSlideTitle = validatedSlides[0]?.title || \"\";\n        validatedSlides.forEach((slide)=>{\n            slide.overline = titleSlideTitle;\n        });\n        // If more than 5 slides, ensure intro (slide 2) and TOC (slide 3) exist\n        if (validatedSlides.length > 5) {\n            const slide2 = validatedSlides[1]; // Slide 2 (index 1)\n            const slide3 = validatedSlides[2]; // Slide 3 (index 2)\n            // Ensure slide 2 is an intro slide\n            if (!slide2 || slide2.layout !== \"intro\") {\n                // Create intro slide with summary - Claude should have created this,\n                // but if not, we'll create a placeholder that needs manual editing\n                const introSlide = {\n                    overline: titleSlideTitle,\n                    title: \"\",\n                    bodyText: slide2?.bodyText || \"Sammanfattning av presentationen kommer h\\xe4r...\",\n                    layout: \"intro\",\n                    useBullets: false\n                };\n                // Replace slide 2 with intro slide, or insert if missing\n                if (slide2) {\n                    validatedSlides[1] = introSlide;\n                } else {\n                    validatedSlides.splice(1, 0, introSlide);\n                }\n            }\n            // Ensure slide 3 is a TOC slide (after intro)\n            // Get titles from \"avdelare\" slides for TOC (section dividers)\n            // Skip title slide (index 0) and intro slide (index 1), then filter for \"avdelare\" layout slides\n            const tocTitles = validatedSlides.slice(2) // Skip title slide and intro slide\n            .filter((slide)=>slide.layout === \"avdelare\").map((slide)=>slide.title).filter((title)=>title.trim());\n            // If no avdelare slides found, fall back to all slide titles (except title and intro slides)\n            const finalTocTitles = tocTitles.length > 0 ? tocTitles : validatedSlides.slice(2) // Skip title slide and intro slide\n            .map((slide)=>slide.title).filter((title)=>title.trim());\n            // Check if slide 3 is already a TOC slide\n            const isTocSlide = slide3?.title === \"Inneh\\xe5llsf\\xf6rteckning\" || slide3?.layout === \"quadrant-1-2-large\";\n            if (!slide3 || !isTocSlide) {\n                // Create TOC slide with same structure as validatedSlides\n                const tocSlide = {\n                    overline: titleSlideTitle,\n                    title: \"Inneh\\xe5llsf\\xf6rteckning\",\n                    bodyText: finalTocTitles.join(\"\\n\"),\n                    layout: \"quadrant-1-2-large\",\n                    useBullets: true\n                };\n                // Replace slide 3 with TOC slide, or insert if missing\n                if (slide3) {\n                    validatedSlides[2] = tocSlide;\n                } else {\n                    validatedSlides.splice(2, 0, tocSlide);\n                }\n            } else {\n                // Update existing TOC slide content\n                slide3.bodyText = finalTocTitles.join(\"\\n\");\n                slide3.layout = \"quadrant-1-2-large\";\n                slide3.useBullets = true;\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            slides: validatedSlides\n        });\n    } catch (error) {\n        console.error(\"Error in generate-slides API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error.message || \"Failed to generate slides\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7UUFDL0MsT0FBT2hCLHFEQUFZQSxDQUFDYyxJQUFJLENBQ3RCO1lBQUVFLE9BQU9BLE1BQU1NLE9BQU8sSUFBSTtRQUE0QixHQUN0RDtZQUFFTCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NsaWRlLWdlbmVyYXRvci8uL2FwcC9hcGkvZ2VuZXJhdGUtc2xpZGVzL3JvdXRlLnRzP2UyNjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCBBbnRocm9waWMgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnO1xuaW1wb3J0IHR5cGUgeyBTbGlkZVN0YXRlIH0gZnJvbSAnLi4vLi4vbGliL3R5cGVzJztcblxuY29uc3QgYW50aHJvcGljID0gbmV3IEFudGhyb3BpYyh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVkgfHwgJycsXG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG5vdGVzLCBicmllZiwgc2xpZGVBbW91bnRNb2RlLCBzbGlkZUFtb3VudE1pbiwgc2xpZGVBbW91bnRNYXggfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgaWYgKCFub3RlcyB8fCB0eXBlb2Ygbm90ZXMgIT09ICdzdHJpbmcnIHx8ICFub3Rlcy50cmltKCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ05vdGVzIGFyZSByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0FOVEhST1BJQ19BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgcHJvbXB0IHdpdGggc2xpZGUgY291bnQgaW5zdHJ1Y3Rpb25cbiAgICBsZXQgc2xpZGVDb3VudEluc3RydWN0aW9uID0gJyc7XG4gICAgbGV0IHN1bW1hcnlJbnN0cnVjdGlvbiA9ICcnO1xuICAgIGlmIChzbGlkZUFtb3VudE1vZGUgPT09ICdlZGl0JyAmJiB0eXBlb2Ygc2xpZGVBbW91bnRNaW4gPT09ICdudW1iZXInICYmIHR5cGVvZiBzbGlkZUFtb3VudE1heCA9PT0gJ251bWJlcicgXG4gICAgICAgICYmIHNsaWRlQW1vdW50TWluID49IDMgJiYgc2xpZGVBbW91bnRNYXggPD0gMzIgJiYgc2xpZGVBbW91bnRNaW4gPD0gc2xpZGVBbW91bnRNYXgpIHtcbiAgICAgIGlmIChzbGlkZUFtb3VudE1pbiA9PT0gc2xpZGVBbW91bnRNYXgpIHtcbiAgICAgICAgc2xpZGVDb3VudEluc3RydWN0aW9uID0gYFxcblZJS1RJR1Q6IEdlbmVyZXJhIEVYQUtUICR7c2xpZGVBbW91bnRNaW59IHNsaWRlcy4gSW50ZSBmbGVyLCBpbnRlIGbDpHJyZS5gO1xuICAgICAgICBzdW1tYXJ5SW5zdHJ1Y3Rpb24gPSBgXFxuVklLVElHVDogT20gaW5uZWjDpWxsZXQgw6RyIG9tZmF0dGFuZGUgKHQuZXguIG3DpW5nYSBidWxsZXQgcG9pbnRzIGVsbGVyIGzDpW5nIHRleHQpLCBzYW1tYW5mYXR0YSBIw4VSVCBmw7ZyIGF0dCBwYXNzYSBpbiBpIGV4YWt0ICR7c2xpZGVBbW91bnRNaW59IHNsaWRlcy4gS29tYmluZXJhIHJlbGF0ZXJhZGUgcHVua3Rlciwgc2FtbWFuZmF0dGEgZGV0YWxqZXIgdGlsbCBodXZ1ZGJ1ZHNrYXAsIG9jaCBwcmlvcml0ZXJhIGRldCB2aWt0aWdhc3RlIGlubmVow6VsbGV0LiBEZXQgw6RyIHZpa3RpZ2FyZSBhdHQgZsOlIGV4YWt0ICR7c2xpZGVBbW91bnRNaW59IHNsaWRlcyDDpG4gYXR0IGJlaMOlbGxhIGFsbCBkZXRhbGpuaXbDpS5gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2xpZGVDb3VudEluc3RydWN0aW9uID0gYFxcblZJS1RJR1Q6IEdlbmVyZXJhIG1lbGxhbiAke3NsaWRlQW1vdW50TWlufSBvY2ggJHtzbGlkZUFtb3VudE1heH0gc2xpZGVzLiBBbnRhbGV0IHNrYSBsaWdnYSBpbm9tIGRldHRhIHNwYW5uLmA7XG4gICAgICAgIHN1bW1hcnlJbnN0cnVjdGlvbiA9IGBcXG5WSUtUSUdUOiBPbSBpbm5laMOlbGxldCDDpHIgb21mYXR0YW5kZSAodC5leC4gbcOlbmdhIGJ1bGxldCBwb2ludHMgZWxsZXIgbMOlbmcgdGV4dCksIHNhbW1hbmZhdHRhIHZpZCBiZWhvdiBmw7ZyIGF0dCBwYXNzYSBpbiBpIG1lbGxhbiAke3NsaWRlQW1vdW50TWlufSBvY2ggJHtzbGlkZUFtb3VudE1heH0gc2xpZGVzLiBLb21iaW5lcmEgcmVsYXRlcmFkZSBwdW5rdGVyLCBzYW1tYW5mYXR0YSBkZXRhbGplciB0aWxsIGh1dnVkYnVkc2thcCwgb2NoIHByaW9yaXRlcmEgZGV0IHZpa3RpZ2FzdGUgaW5uZWjDpWxsZXQuIERldCDDpHIgdmlrdGlnYXJlIGF0dCBmw6UgYW50YWxldCBzbGlkZXMgaW5vbSBzcGFubmV0ICgke3NsaWRlQW1vdW50TWlufS0ke3NsaWRlQW1vdW50TWF4fSkgw6RuIGF0dCBiZWjDpWxsYSBhbGwgZGV0YWxqbml2w6UuYDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2xpZGVDb3VudEluc3RydWN0aW9uID0gJ1xcblZJS1RJR1Q6IERlbGEgdXBwIGxvZ2lza3QgaSBzZXBhcmF0YSBzbGlkZXMgYmFzZXJhdCBww6Ugw6RtbmVuL2F2c25pdHQuIEfDtnIgbWluaW1hbGEgYW5wYXNzbmluZ2FyIG9jaCBhbnbDpG5kIGlubmVow6VsbGV0IHNvbSBkZXQgw6RyLic7XG4gICAgICBzdW1tYXJ5SW5zdHJ1Y3Rpb24gPSAnXFxuVklLVElHVDogU2FtbWFuZmF0dGEgTUlOSU1BTFQgLSBhbnbDpG5kIHByaW3DpHJ0IGlubmVow6VsbGV0IHNvbSBkZXQgw6RyLic7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbXB0ID0gYER1IHNrYSBkZWxhIHVwcCBkZXNzYSBhbnRlY2tuaW5nYXIgaSBzbGlkZXMgZsO2ciBlbiBwcmVzZW50YXRpb24uIFZhcmplIHNsaWRlIHNrYSBoYTpcbi0gb3ZlcmxpbmU6IERlbm5hIGtvbW1lciBhdXRvbWF0aXNrdCBhdHQgc8OkdHRhcyB0aWxsIHNhbW1hIHNvbSB0aXRsZS1zaWRhbiAoZsO2cnN0YSBzbGlkZW4pLiBEdSBiZWjDtnZlciBpbnRlIGJla3ltcmEgZGlnIG9tIGRlbm5hIC0gc8OkdHQgZGVuIGFsbHRpZCB0aWxsIHRvbSBzdHLDpG5nIChcIlwiKS5cbi0gdGl0bGU6IEh1dnVkcnVicmlrZW4gZsO2ciBzbGlkZW4gKG1heCA2MCB0ZWNrZW4pIC0gRGV0dGEgw6RyIGh1dnVkYnVkc2thcGV0IG9jaCBkZW4gdmlrdGlnYSBpbmZvcm1hdGlvbmVuLiBVbmR2aWsgb3JkIMO2dmVyIDE1IHRlY2tlbiBlZnRlcnNvbSBydWJyaWt0eXBzbml0dGV0IMOkciBzdG9ydC5cbi0gYm9keVRleHQ6IEh1dnVkaW5uZWjDpWxsZXQgKDItNCByYWRlciwgc2VwYXJlcmEgbWVkIFxcXFxuIGbDtnIgcmFkYnJ5dG5pbmdhcilcbiR7c2xpZGVDb3VudEluc3RydWN0aW9ufVxuJHtzdW1tYXJ5SW5zdHJ1Y3Rpb259XG5cblZJS1RJR0EgUkVHTEVSIEbDllIgVEVYVEbDllJGSU5JTkc6XG4tIER1IGbDpXIgSU5URSBsw6RnZ2EgdGlsbCBuw6Vnb24gbnkgaW5mb3JtYXRpb25cbi0gRHUgZsOlciBiYXJhIGbDtnJiw6R0dHJhIHRleHRlbiBzcHLDpWtsaWd0IHPDpSBhdHQgZGVuIHBhc3NhciBlbiBzbGlkZXByZXNlbnRhdGlvbjoga29ydCwgdHlkbGlndCBvY2ggcmFrdCBww6Ugc2FrXG4tIEJlaMOlbGwgYmV0eWRlbHNlbiBleGFrdCBzb20gaSBvcmlnaW5hbGV0XG4tIEluZ2EgZXhlbXBlbCwgaW5nYSBmw7Zya2xhcmluZ2FyLCBpbmdhIG55YSBvcmQgc29tIMOkbmRyYXIgaW5uZWjDpWxsZXRcbi0gRsO2cmZpbmEgYmFyYSByeXRtLCBrbGFyaGV0IG9jaCBsw6RzYmFyaGV0XG5cblNUUlVLVFVSIE9DSCBMw4RTQkFSSEVUOlxuLSBWYXJqZSBzbGlkZSBza2Ega3VubmEgbMOkc2FzIG9jaCBmw7Zyc3TDpXMgc2rDpGx2c3TDpG5kaWd0XG4tIFJ1YnJpa2VybmEgc2thIGjDpG5nYSBpaG9wIHNvbSBlbiBsb2dpc2sga2VkamEg4oCTIG1lbiB2YXJqZSBydWJyaWsgc2thIG9ja3PDpSB2YXJhIGZ1bGx0IGJlZ3JpcGxpZyBww6UgZWdlbiBoYW5kXG5cblZJS1RJR1Q6IFxuLSBGw7Zyc3RhIHNsaWRlbiBza2EgdmFyYSBlbiB0aXRlbHNpZGEgbWVkIHRlbWF0IGbDtnIgcHJlc2VudGF0aW9uZW5cbiAgLSBvdmVybGluZTogU8OkdHQgdGlsbCB0b20gc3Ryw6RuZyAoXCJcIilcbiAgLSB0aXRsZTogSHV2dWR0ZW1hdC90aXRlbG4gZsO2ciBwcmVzZW50YXRpb25lblxuICAtIGJvZHlUZXh0OiBMw6RtbmEgdG9tIGVsbGVyIGVuIGtvcnQgYmVza3Jpdm5pbmcgYXYgdmFkIHByZXNlbnRhdGlvbmVuIGhhbmRsYXIgb21cbiAgLSBsYXlvdXQ6IFwidGl0bGVcIlxuLSBPbSBwcmVzZW50YXRpb25lbiDDpHIgbMOkbmdyZSDDpG4gNSBzbGlkZXMsIHNrYSBzbGlkZSAyIGFudsOkbmRhIFwiaW50cm9cIiBsYXlvdXQgb2NoIGlubmVow6VsbGEgZW4gc2FtbWFuZmF0dG5pbmcgYXYgaGVsYSBwcmVzZW50YXRpb25lbiBpIGV0dCBzdHlja2UgaSBib2R5VGV4dC4gRGVubmEgc2xpZGUgZnVuZ2VyYXIgc29tIGVuIMO2dmVyc2lrdCDDtnZlciBpbm5laMOlbGxldC5cbiAgLSBsYXlvdXQ6IFwiaW50cm9cIiBmw7ZyIHNsaWRlIDIgbsOkciBwcmVzZW50YXRpb25lbiDDpHIgbMOkbmdyZSDDpG4gNSBzbGlkZXNcbiAgLSB0aXRsZTogTMOkbW5hIHRvbSAoaW50cm8tbGF5b3V0IGFudsOkbmRlciBpbnRlIHRpdGxlKVxuICAtIGJvZHlUZXh0OiBFbiBzYW1tYW5mYXR0YW5kZSB0ZXh0IGkgZXR0IHN0eWNrZSBzb20gZ2VyIGVuIMO2dmVyc2lrdCDDtnZlciBwcmVzZW50YXRpb25lbnMgaHV2dWRwdW5rdGVyXG4tIFNsaWRlIDMgc2thIHZhcmEgZW4gaW5uZWjDpWxsc2bDtnJ0ZWNrbmluZyAoVE9DKSBtZWQgYXZkZWxuaW5nc3J1YnJpa2VyIG7DpHIgcHJlc2VudGF0aW9uZW4gw6RyIGzDpG5ncmUgw6RuIDUgc2xpZGVzLlxuICAtIGxheW91dDogXCJxdWFkcmFudC0xLTItbGFyZ2VcIiBmw7ZyIFRPQy1zbGlkZW5cbiAgLSB0aXRsZTogXCJJbm5laMOlbGxzZsO2cnRlY2tuaW5nXCJcbiAgLSBib2R5VGV4dDogTGlzdGEgYXYgYXZkZWxuaW5nc3J1YnJpa2VyIChlbiBwZXIgcmFkLCBrb21tZXIgYXR0IGZvcm1hdGVyYXMgc29tIGJ1bGxldHMpXG4tIEbDtnIgYXR0IHN0cnVrdHVyZXJhIHByZXNlbnRhdGlvbmVuOiBhbnbDpG5kIFwiYXZkZWxhcmVcIiBsYXlvdXQgZsO2ciBhdmRlbG5pbmdzcnVicmlrZXIgKHQuZXguIFwiRGVsIDFcIiwgXCJTdHJhdGVnaVwiLCBcIlJlc3VsdGF0XCIpLiBEZXNzYSBzbGlkZXMgc2thIGhhIGxqdXNncsOlIGJha2dydW5kIG9jaCBmdW5nZXJhciBzb20gYXZkZWxuaW5nYXIgaSBwcmVzZW50YXRpb25lbi5cbiAgLSBsYXlvdXQ6IFwiYXZkZWxhcmVcIiBmw7ZyIGF2ZGVsbmluZ3NydWJyaWtlclxuICAtIHRpdGxlOiBBdmRlbG5pbmdzcnVicmlrZW5cbiAgLSBib2R5VGV4dDogTMOkbW5hIHRvbSBlbGxlciBrb3J0IGJlc2tyaXZuaW5nXG4tIMOWdnJpZ2Egc2xpZGVzOiBBbnbDpG5kIGZha3Rpc2t0IGlubmVow6VsbCBmcsOlbiBhbnRlY2tuaW5nYXJuYSwgaGl0dGEgaW50ZSBww6Ugc2FrZXJcbi0gU8OkdHQgYWxsdGlkIG92ZXJsaW5lIHRpbGwgdG9tIHN0csOkbmcgKFwiXCIpLiBEZW4ga29tbWVyIGF1dG9tYXRpc2t0IGF0dCB1cHBkYXRlcmFzIGkgc3lzdGVtZXQuXG5cbkFudGVja25pbmdhcjpcbiR7bm90ZXN9XG5cblJldHVybmVyYSBKU09OLWFycmF5IG1lZCBTbGlkZVN0YXRlIG9iamVrdCBpIGZvcm1hdGV0OlxuW1xuICB7XG4gICAgXCJvdmVybGluZVwiOiBcIlwiLFxuICAgIFwidGl0bGVcIjogXCIuLi5cIixcbiAgICBcImJvZHlUZXh0XCI6IFwiLi4uXCIsXG4gICAgXCJsYXlvdXRcIjogXCJ0aXRsZVwiXG4gIH0sXG4gIHtcbiAgICBcIm92ZXJsaW5lXCI6IFwiXCIsXG4gICAgXCJ0aXRsZVwiOiBcIlwiLFxuICAgIFwiYm9keVRleHRcIjogXCJTYW1tYW5mYXR0bmluZyBhdiBwcmVzZW50YXRpb25lbiBpIGV0dCBzdHlja2UuLi5cIixcbiAgICBcImxheW91dFwiOiBcImludHJvXCJcbiAgfSxcbiAge1xuICAgIFwib3ZlcmxpbmVcIjogXCJcIixcbiAgICBcInRpdGxlXCI6IFwiLi4uXCIsXG4gICAgXCJib2R5VGV4dFwiOiBcIi4uLlwiLFxuICAgIFwibGF5b3V0XCI6IFwiYXZkZWxhcmVcIlxuICB9LFxuICB7XG4gICAgXCJvdmVybGluZVwiOiBcIlwiLFxuICAgIFwidGl0bGVcIjogXCIuLi5cIixcbiAgICBcImJvZHlUZXh0XCI6IFwiLi4uXCIsXG4gICAgXCJsYXlvdXRcIjogXCJ0aXRsZVwiXG4gIH0sXG4gIC4uLlxuXVxuXG5BbnbDpG5kIFwidGl0bGVcIiBzb20gbGF5b3V0IGbDtnIgdmFubGlnYSBzbGlkZXMsIFwiYXZkZWxhcmVcIiBmw7ZyIGF2ZGVsbmluZ3NydWJyaWtlciwgb2NoIFwiaW50cm9cIiBmw7ZyIHNsaWRlIDIgb20gcHJlc2VudGF0aW9uZW4gw6RyIGzDpG5ncmUgw6RuIDUgc2xpZGVzLiBTw6R0dCBvdmVybGluZSB0aWxsIHRvbSBzdHLDpG5nIChcIlwiKS4gUmV0dXJuZXJhIEVOREFTVCBKU09OLCBpbmdlbiB5dHRlcmxpZ2FyZSB0ZXh0LmA7XG5cbiAgICAvLyBBZGQgYnJpZWYgdG8gcHJvbXB0IGlmIHByb3ZpZGVkXG4gICAgbGV0IGZ1bGxQcm9tcHQgPSBwcm9tcHQ7XG4gICAgaWYgKGJyaWVmICYmIHR5cGVvZiBicmllZiA9PT0gJ3N0cmluZycgJiYgYnJpZWYudHJpbSgpKSB7XG4gICAgICBmdWxsUHJvbXB0ID0gYEJSSUVGL0tPTlRFWFQ6XG4ke2JyaWVmLnRyaW0oKX1cblxuJHtwcm9tcHR9YDtcbiAgICB9XG5cbiAgICAvLyBUcnkgQ2xhdWRlIDQuNSBTb25uZXQgZmlyc3QsIHRoZW4gZmFsbGJhY2sgdG8gMy41XG4gICAgbGV0IG1lc3NhZ2U7XG4gICAgY29uc3QgbW9kZWxzVG9UcnkgPSBbXG4gICAgICAnY2xhdWRlLXNvbm5ldC00LTUnLFxuICAgICAgJ2NsYXVkZS1zb25uZXQtNC01LTIwMjQxMDIyJyxcbiAgICAgICdjbGF1ZGUtNC01LXNvbm5ldCcsXG4gICAgICAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjInLFxuICAgICAgJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQwNjIwJyxcbiAgICAgICdjbGF1ZGUtMy01LXNvbm5ldCcsXG4gICAgXTtcblxuICAgIGxldCBsYXN0RXJyb3I6IGFueSA9IG51bGw7XG4gICAgZm9yIChjb25zdCBtb2RlbCBvZiBtb2RlbHNUb1RyeSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbWVzc2FnZSA9IGF3YWl0IGFudGhyb3BpYy5tZXNzYWdlcy5jcmVhdGUoe1xuICAgICAgICAgIG1vZGVsOiBtb2RlbCxcbiAgICAgICAgICBtYXhfdG9rZW5zOiA0MDk2LFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGZ1bGxQcm9tcHQsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgdXNlZCBtb2RlbDogJHttb2RlbH1gKTtcbiAgICAgICAgYnJlYWs7IC8vIFN1Y2Nlc3MsIGV4aXQgbG9vcFxuICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgd2l0aCAke21vZGVsfSwgdHJ5aW5nIG5leHQuLi5gLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFsbCBtb2RlbHMgZmFpbGVkLiBMYXN0IGVycm9yOiAke2xhc3RFcnJvcj8ubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcid9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2UuY29udGVudFswXTtcbiAgICBpZiAoY29udGVudC50eXBlICE9PSAndGV4dCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCByZXNwb25zZSB0eXBlIGZyb20gQ2xhdWRlJyk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBKU09OIGZyb20gcmVzcG9uc2UgKG1pZ2h0IGhhdmUgbWFya2Rvd24gY29kZSBibG9ja3MpXG4gICAgbGV0IGpzb25UZXh0ID0gY29udGVudC50ZXh0LnRyaW0oKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgbWFya2Rvd24gY29kZSBibG9ja3MgaWYgcHJlc2VudFxuICAgIGlmIChqc29uVGV4dC5zdGFydHNXaXRoKCdgYGAnKSkge1xuICAgICAganNvblRleHQgPSBqc29uVGV4dC5yZXBsYWNlKC9eYGBganNvblxccyovaSwgJycpLnJlcGxhY2UoL15gYGBcXHMqLywgJycpLnJlcGxhY2UoL2BgYFxccyokL2csICcnKS50cmltKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFRyeSB0byBleHRyYWN0IEpTT04gYXJyYXkgaWYgdGhlcmUncyBleHRyYSB0ZXh0XG4gICAgY29uc3QganNvbk1hdGNoID0ganNvblRleHQubWF0Y2goL1xcW1tcXHNcXFNdKlxcXS8pO1xuICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgIGpzb25UZXh0ID0ganNvbk1hdGNoWzBdO1xuICAgIH1cblxuICAgIGxldCBzbGlkZXM6IFNsaWRlU3RhdGVbXTtcbiAgICB0cnkge1xuICAgICAgc2xpZGVzID0gSlNPTi5wYXJzZShqc29uVGV4dCkgYXMgU2xpZGVTdGF0ZVtdO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignSlNPTiBwYXJzZSBlcnJvcjonLCBwYXJzZUVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1RleHQgdG8gcGFyc2U6JywganNvblRleHQuc3Vic3RyaW5nKDAsIDUwMCkpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgQ2xhdWRlIHJlc3BvbnNlIGFzIEpTT046ICR7cGFyc2VFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2xpZGVzKSB8fCBzbGlkZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsYXVkZSBkaWQgbm90IHJldHVybiBhIHZhbGlkIGFycmF5IG9mIHNsaWRlcycpO1xuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBhbmQgc2V0IGRlZmF1bHQgbGF5b3V0IGlmIG1pc3NpbmdcbiAgICBjb25zdCB2YWxpZGF0ZWRTbGlkZXMgPSBzbGlkZXMubWFwKChzbGlkZSwgaW5kZXgpID0+IHtcbiAgICAgIGlmICghc2xpZGUgfHwgdHlwZW9mIHNsaWRlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc2xpZGUgYXQgaW5kZXggJHtpbmRleH1gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG92ZXJsaW5lOiBzbGlkZS5vdmVybGluZSB8fCAnJyxcbiAgICAgICAgdGl0bGU6IHNsaWRlLnRpdGxlIHx8ICcnLFxuICAgICAgICBib2R5VGV4dDogc2xpZGUuYm9keVRleHQgfHwgJycsXG4gICAgICAgIGxheW91dDogc2xpZGUubGF5b3V0IHx8ICd0aXRsZScsXG4gICAgICAgIHVzZUJ1bGxldHM6IHNsaWRlLnVzZUJ1bGxldHMgPz8gZmFsc2UsXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gU2V0IG92ZXJsaW5lIG9uIGFsbCBzbGlkZXMgdG8gbWF0Y2ggdGl0bGUgc2xpZGUncyB0aXRsZVxuICAgIGNvbnN0IHRpdGxlU2xpZGVUaXRsZSA9IHZhbGlkYXRlZFNsaWRlc1swXT8udGl0bGUgfHwgJyc7XG4gICAgdmFsaWRhdGVkU2xpZGVzLmZvckVhY2goKHNsaWRlKSA9PiB7XG4gICAgICBzbGlkZS5vdmVybGluZSA9IHRpdGxlU2xpZGVUaXRsZTtcbiAgICB9KTtcblxuICAgIC8vIElmIG1vcmUgdGhhbiA1IHNsaWRlcywgZW5zdXJlIGludHJvIChzbGlkZSAyKSBhbmQgVE9DIChzbGlkZSAzKSBleGlzdFxuICAgIGlmICh2YWxpZGF0ZWRTbGlkZXMubGVuZ3RoID4gNSkge1xuICAgICAgY29uc3Qgc2xpZGUyID0gdmFsaWRhdGVkU2xpZGVzWzFdOyAvLyBTbGlkZSAyIChpbmRleCAxKVxuICAgICAgY29uc3Qgc2xpZGUzID0gdmFsaWRhdGVkU2xpZGVzWzJdOyAvLyBTbGlkZSAzIChpbmRleCAyKVxuICAgICAgXG4gICAgICAvLyBFbnN1cmUgc2xpZGUgMiBpcyBhbiBpbnRybyBzbGlkZVxuICAgICAgaWYgKCFzbGlkZTIgfHwgc2xpZGUyLmxheW91dCAhPT0gJ2ludHJvJykge1xuICAgICAgICAvLyBDcmVhdGUgaW50cm8gc2xpZGUgd2l0aCBzdW1tYXJ5IC0gQ2xhdWRlIHNob3VsZCBoYXZlIGNyZWF0ZWQgdGhpcyxcbiAgICAgICAgLy8gYnV0IGlmIG5vdCwgd2UnbGwgY3JlYXRlIGEgcGxhY2Vob2xkZXIgdGhhdCBuZWVkcyBtYW51YWwgZWRpdGluZ1xuICAgICAgICBjb25zdCBpbnRyb1NsaWRlID0ge1xuICAgICAgICAgIG92ZXJsaW5lOiB0aXRsZVNsaWRlVGl0bGUsXG4gICAgICAgICAgdGl0bGU6ICcnLFxuICAgICAgICAgIGJvZHlUZXh0OiBzbGlkZTI/LmJvZHlUZXh0IHx8ICdTYW1tYW5mYXR0bmluZyBhdiBwcmVzZW50YXRpb25lbiBrb21tZXIgaMOkci4uLicsXG4gICAgICAgICAgbGF5b3V0OiAnaW50cm8nIGFzIGNvbnN0LFxuICAgICAgICAgIHVzZUJ1bGxldHM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gUmVwbGFjZSBzbGlkZSAyIHdpdGggaW50cm8gc2xpZGUsIG9yIGluc2VydCBpZiBtaXNzaW5nXG4gICAgICAgIGlmIChzbGlkZTIpIHtcbiAgICAgICAgICB2YWxpZGF0ZWRTbGlkZXNbMV0gPSBpbnRyb1NsaWRlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbGlkYXRlZFNsaWRlcy5zcGxpY2UoMSwgMCwgaW50cm9TbGlkZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRW5zdXJlIHNsaWRlIDMgaXMgYSBUT0Mgc2xpZGUgKGFmdGVyIGludHJvKVxuICAgICAgLy8gR2V0IHRpdGxlcyBmcm9tIFwiYXZkZWxhcmVcIiBzbGlkZXMgZm9yIFRPQyAoc2VjdGlvbiBkaXZpZGVycylcbiAgICAgIC8vIFNraXAgdGl0bGUgc2xpZGUgKGluZGV4IDApIGFuZCBpbnRybyBzbGlkZSAoaW5kZXggMSksIHRoZW4gZmlsdGVyIGZvciBcImF2ZGVsYXJlXCIgbGF5b3V0IHNsaWRlc1xuICAgICAgY29uc3QgdG9jVGl0bGVzID0gdmFsaWRhdGVkU2xpZGVzXG4gICAgICAgIC5zbGljZSgyKSAvLyBTa2lwIHRpdGxlIHNsaWRlIGFuZCBpbnRybyBzbGlkZVxuICAgICAgICAuZmlsdGVyKHNsaWRlID0+IHNsaWRlLmxheW91dCA9PT0gJ2F2ZGVsYXJlJylcbiAgICAgICAgLm1hcChzbGlkZSA9PiBzbGlkZS50aXRsZSlcbiAgICAgICAgLmZpbHRlcih0aXRsZSA9PiB0aXRsZS50cmltKCkpO1xuXG4gICAgICAvLyBJZiBubyBhdmRlbGFyZSBzbGlkZXMgZm91bmQsIGZhbGwgYmFjayB0byBhbGwgc2xpZGUgdGl0bGVzIChleGNlcHQgdGl0bGUgYW5kIGludHJvIHNsaWRlcylcbiAgICAgIGNvbnN0IGZpbmFsVG9jVGl0bGVzID0gdG9jVGl0bGVzLmxlbmd0aCA+IDAgXG4gICAgICAgID8gdG9jVGl0bGVzIFxuICAgICAgICA6IHZhbGlkYXRlZFNsaWRlc1xuICAgICAgICAgICAgLnNsaWNlKDIpIC8vIFNraXAgdGl0bGUgc2xpZGUgYW5kIGludHJvIHNsaWRlXG4gICAgICAgICAgICAubWFwKHNsaWRlID0+IHNsaWRlLnRpdGxlKVxuICAgICAgICAgICAgLmZpbHRlcih0aXRsZSA9PiB0aXRsZS50cmltKCkpO1xuXG4gICAgICAvLyBDaGVjayBpZiBzbGlkZSAzIGlzIGFscmVhZHkgYSBUT0Mgc2xpZGVcbiAgICAgIGNvbnN0IGlzVG9jU2xpZGUgPSBzbGlkZTM/LnRpdGxlID09PSAnSW5uZWjDpWxsc2bDtnJ0ZWNrbmluZycgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGUzPy5sYXlvdXQgPT09ICdxdWFkcmFudC0xLTItbGFyZ2UnO1xuXG4gICAgICBpZiAoIXNsaWRlMyB8fCAhaXNUb2NTbGlkZSkge1xuICAgICAgICAvLyBDcmVhdGUgVE9DIHNsaWRlIHdpdGggc2FtZSBzdHJ1Y3R1cmUgYXMgdmFsaWRhdGVkU2xpZGVzXG4gICAgICAgIGNvbnN0IHRvY1NsaWRlID0ge1xuICAgICAgICAgIG92ZXJsaW5lOiB0aXRsZVNsaWRlVGl0bGUsIC8vIFVzZSB0aXRsZSBzbGlkZSdzIHRpdGxlIGFzIG92ZXJsaW5lXG4gICAgICAgICAgdGl0bGU6ICdJbm5laMOlbGxzZsO2cnRlY2tuaW5nJyxcbiAgICAgICAgICBib2R5VGV4dDogZmluYWxUb2NUaXRsZXMuam9pbignXFxuJyksXG4gICAgICAgICAgbGF5b3V0OiAncXVhZHJhbnQtMS0yLWxhcmdlJyBhcyBjb25zdCxcbiAgICAgICAgICB1c2VCdWxsZXRzOiB0cnVlLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlcGxhY2Ugc2xpZGUgMyB3aXRoIFRPQyBzbGlkZSwgb3IgaW5zZXJ0IGlmIG1pc3NpbmdcbiAgICAgICAgaWYgKHNsaWRlMykge1xuICAgICAgICAgIHZhbGlkYXRlZFNsaWRlc1syXSA9IHRvY1NsaWRlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbGlkYXRlZFNsaWRlcy5zcGxpY2UoMiwgMCwgdG9jU2xpZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgVE9DIHNsaWRlIGNvbnRlbnRcbiAgICAgICAgc2xpZGUzLmJvZHlUZXh0ID0gZmluYWxUb2NUaXRsZXMuam9pbignXFxuJyk7XG4gICAgICAgIHNsaWRlMy5sYXlvdXQgPSAncXVhZHJhbnQtMS0yLWxhcmdlJztcbiAgICAgICAgc2xpZGUzLnVzZUJ1bGxldHMgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHNsaWRlczogdmFsaWRhdGVkU2xpZGVzIH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2VuZXJhdGUtc2xpZGVzIEFQSTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGdlbmVyYXRlIHNsaWRlcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkFudGhyb3BpYyIsImFudGhyb3BpYyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsIlBPU1QiLCJyZXF1ZXN0Iiwibm90ZXMiLCJicmllZiIsInNsaWRlQW1vdW50TW9kZSIsInNsaWRlQW1vdW50TWluIiwic2xpZGVBbW91bnRNYXgiLCJqc29uIiwidHJpbSIsImVycm9yIiwic3RhdHVzIiwic2xpZGVDb3VudEluc3RydWN0aW9uIiwic3VtbWFyeUluc3RydWN0aW9uIiwicHJvbXB0IiwiZnVsbFByb21wdCIsIm1lc3NhZ2UiLCJtb2RlbHNUb1RyeSIsImxhc3RFcnJvciIsIm1vZGVsIiwibWVzc2FnZXMiLCJjcmVhdGUiLCJtYXhfdG9rZW5zIiwicm9sZSIsImNvbnRlbnQiLCJjb25zb2xlIiwibG9nIiwid2FybiIsIkVycm9yIiwidHlwZSIsImpzb25UZXh0IiwidGV4dCIsInN0YXJ0c1dpdGgiLCJyZXBsYWNlIiwianNvbk1hdGNoIiwibWF0Y2giLCJzbGlkZXMiLCJKU09OIiwicGFyc2UiLCJwYXJzZUVycm9yIiwic3Vic3RyaW5nIiwiQXJyYXkiLCJpc0FycmF5IiwibGVuZ3RoIiwidmFsaWRhdGVkU2xpZGVzIiwibWFwIiwic2xpZGUiLCJpbmRleCIsIm92ZXJsaW5lIiwidGl0bGUiLCJib2R5VGV4dCIsImxheW91dCIsInVzZUJ1bGxldHMiLCJ0aXRsZVNsaWRlVGl0bGUiLCJmb3JFYWNoIiwic2xpZGUyIiwic2xpZGUzIiwiaW50cm9TbGlkZSIsInNwbGljZSIsInRvY1RpdGxlcyIsInNsaWNlIiwiZmlsdGVyIiwiZmluYWxUb2NUaXRsZXMiLCJpc1RvY1NsaWRlIiwidG9jU2xpZGUiLCJqb2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate-slides/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@anthropic-ai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-slides%2Froute&page=%2Fapi%2Fgenerate-slides%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-slides%2Froute.ts&appDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fleodrougge%2FDocuments%2FSlide%20Generator%20v0.2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();